$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$((function(){$(".max-caracteres").each((function(){var max_caracteres=$(this).data("max_caracteres")||255;$(this).parent().find("label").append('<span class="ml-2 count-max-caracteres-length">(max. caracteres '+max_caracteres+")</span>")}))})),$(document).on("keydown",".max-caracteres",(function(e){var max_caracteres=$(this).data("max_caracteres")||255;if($(this).parent().find(".count-max-caracteres-length").html("(max. caracteres "+(max_caracteres-$(this).val().length)+")"),$(this).val().length>=max_caracteres&&8!=e.keyCode&&9!=e.keyCode)return!1})),$(".textarea").summernote({height:300,minHeight:null,maxHeight:null,dialogsInBody:!0,dialogsFade:!1}),$(".date-mask").daterangepicker({singleDatePicker:!1,showDropdowns:!0,locale:{format:"DD/MM/YYYY",daysOfWeek:["dom","seg","ter","qua","qui","sex","sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","outubro","Novembro","Dezembro"],applyLabel:"Aplicar",cancelLabel:"Cancelar"}}),$(".my-colorpicker2").colorpicker(),$(".my-colorpicker2").on("colorpickerChange",(function(event){$(".my-colorpicker2 .fa-square").css("color",event.color.toString())})),$('[name="post_code"]').mask("00000-000"),$('[name="number"]').mask("0000000000"),$('[name="phone1"]').mask("(00) 0000-0000"),$('[name="phone2"]').mask("(00) 00000-0000");var options={onKeyPress:function(cpf,ev,el,op){var masks=["000.000.000-000","00.000.000/0000-00"];$('[name="cnpj_cpf"]').mask(cpf.length>14?masks[1]:masks[0],op)}};function funcaoSuccessExtra(data,target){switch(target){case"#postProductNovaCategoria":var modal_form="#postEditarProduto";if($("#novoProduto").is(":visible")&&(modal_form="#postNovoProduto"),"category_id"==$(modal_form).find(".main_category option:selected").data("new_category")){$(modal_form).find(".main_category").empty(),$(modal_form).find(".main_category").append('<option value="" data-new_category="category_id"> - Nova Categoria - </option>');var categories=buscaCategoria({category_id:"S"});$.each(categories.responseJSON,(key,value)=>{$(modal_form).find(".main_category").append('<option value="'+value.id+'">'+value.name+"</option>")})}if("category_id"!==$(modal_form).find(".main_category option:selected").data("new_category")){let subCategories=$(modal_form).find(".sub_category").val();$(modal_form).find(".sub_category").empty();var categories=buscaCategoria({parent_id:$(modal_form).find(".main_category option:selected").val()});$.each(categories.responseJSON,(key,value)=>{$(modal_form).find(".sub_category").append('<option value="'+value.id+'">'+value.name+"</option>")}),subCategories.length>0&&($(modal_form).find(".sub_category").val(subCategories),$(modal_form).find(".sub_category").trigger("change"))}break;case"#postEditarCategoria":break;case"#postEditarProduto":$(".tr-id-"+data.product_id).children().eq(1).html('<img width="100px" src="'+data.image_data+'">'),$(".tr-id-"+data.product_id).children().eq(2).html(data.product_name),$(".tr-id-"+data.product_id).children().eq(3).html(data.measured_unit),$(".tr-id-"+data.product_id).children().eq(4).html(data.sales_uni),$(".tr-id-"+data.product_id).children().eq(5).html(data.value),$(".tr-id-"+data.product_id).find(".btn-editar").data("images",data.dados_image),$(".tr-id-"+data.product_id).find(".btn-editar").data("dados",data.dados);break;case"#postEditarPromocao":$(".tr-id-"+data.promotion_id).children().eq(2).html(data.value),$(".tr-id-"+data.promotion_id).children().eq(3).html(data.start_date),$(".tr-id-"+data.promotion_id).children().eq(4).html(data.final_date),$(".tr-id-"+data.promotion_id).find(".btn-editar").data("dados",data.dados)}}function funcaoEventoExtra(data,target){switch(target){case"#postProductNovaCategoria":var modal_form="#postEditarProduto";$("#novoProduto").is(":visible")&&(modal_form="#postNovoProduto"),"category_id"==$(modal_form).find(".main_category option:selected").data("new_category")&&($(modal_form).find(".sub_category").empty(),$(target).find('[name="parent_id"]').val(""),$(modal_form).find(".sub_category").append('<option value="" data-new_category="parent_id"> - Nova Sub Categoria- </option>'))}}function buscaCategoria(data){return $.ajax({url:"./pesquisa_categoria",type:"POST",data:data,async:!1})}$('[name="cnpj_cpf"]').length>11?$('[name="cnpj_cpf"]').mask("00.000.000/0000-00",options):$('[name="cnpj_cpf"]').mask("000.000.000-00#",options),$('[name="cnpj_cpf"]').blur((function(){var thiss=$(this),cpf_cnpj=$(this).val();cpf_cnpj&&(valida_cpf_cnpj(cpf_cnpj)||Swal.fire({icon:"error",text:"CNPJ/CPF informado invalido!"}).then(result=>{}))})),$((function(){$('[name="state"]')&&$.ajax({url:"https://servicodados.ibge.gov.br/api/v1/localidades/estados/",type:"GET",success:data=>{for(var i=0;data.length>i;i++)$('[name="state"]').append('<option value="'+data[i].sigla+'" data-sigla_id="'+data[i].id+'">'+data[i].sigla+" - "+data[i].nome+"</option>")}})})),$(document).on("change",'[name="state"]',(function(){let sigla_id=$(this).find(":selected").data("sigla_id"),select=$(this).parent().parent().find('select[name="city"]');$.ajax({url:"https://servicodados.ibge.gov.br/api/v1/localidades/estados/"+sigla_id+"/municipios",type:"GET",success:data=>{select.empty(),select.append('<option value="">::Selecione uma Opção::</option>'),select.is(".entrega")&&select.append('<option value="Toda Região">Toda Região</option>');for(var i=0;data.length>i;i++)select.append('<option value="'+data[i].nome+'">'+data[i].nome+"</option>")}})})),$('[name="post_code"]').on("keyup blur",(function(){$(this).parent().parent().find("input, select").attr("readonly",!1),$(this).parent().parent().find("input, select").trigger("change"),9==$(this).val().length&&($(".loadCep").removeClass("d-none"),$.ajax({url:"/cep/"+$(this).val(),type:"GET",success:data=>{$('[name="address"]').val(data.logradouro),data.logradouro&&$('[name="address"]').prop("readonly",!0),$('[name="address2"]').val(data.bairro),data.bairro&&$('[name="address2"]').prop("readonly",!0),$('[name="state"]').val(data.uf),data.uf&&($('[name="state"]').attr("readonly",!0),$('[name="state"]').trigger("change")),setTimeout(()=>{$('[name="city"]').val(data.localidade),data.localidade&&($('[name="city"]').attr("readonly",!0),$('[name="city"]').trigger("change"))},800),$('[name="number"]').focus(),$(".loadCep").addClass("d-none")}}))})),$(document).on("show.bs.modal","#novoProduto, #editarProduto",(function(event){var zIndex=1050+10*$(".modal:visible").length;$(this).css("z-index",zIndex),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").first().css("z-index",zIndex-1).addClass("modal-stack")}),0)})).on("hidden.bs.modal","#novoProduto, #editarProduto",(function(event){$(".modal:visible").length&&$("body").addClass("modal-open")})),$(document).on("show.bs.modal","#novaCategoria",(function(event){var zIndex=1051+10*$(".modal:visible").length;$(this).css("z-index",zIndex),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").first().css("z-index",zIndex-1).addClass("modal-stack")}),0)})).on("hidden.bs.modal","#novaCategoria",(function(event){$(".modal:visible").length&&$("body").addClass("modal-open")})),$(document).on("show.bs.modal",".note-modal",(function(event){var zIndex=1e4+10*$(".modal:visible").length;$(this).css("z-index",zIndex),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").first().css("z-index",zIndex-1).addClass("modal-stack")}),0)})).on("hidden.bs.modal",".note-modal",(function(event){$(".modal:visible").length&&$("body").addClass("modal-open")})),$(document).on("inserted.bs.tooltip",(function(event){var zIndex=1e5+10*$(".modal:visible").length,tooltipId=$(event.target).attr("aria-describedby");$("#"+tooltipId).css("z-index",zIndex)})),$(document).on("inserted.bs.popover",(function(event){var zIndex=1e5+10*$(".modal:visible").length,popoverId=$(event.target).attr("aria-describedby");$("#"+popoverId).css("z-index",zIndex)})),$(".custom-file input").change((function(e){for(var files=[],i=0;i<$(this)[0].files.length;i++)files.push($(this)[0].files[i].name);$(this).next(".custom-file-label").html(files.join(", "))})),$("form").on("submit",(function(e){$(this).find(".btn-salvar").length>0&&(e.preventDefault(),$(this).find(".btn-salvar").trigger("click"))}));var Toast=Swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:4e3});$(".select2").select2(),$(".img_icon").on("change",(function(){var form_img=$(this).parent().parent();form_img.find(".img-icon").empty();var preview=form_img.find(".img-icon"),files=form_img.find(".img_icon").prop("files");function readAndPreview(file){if(/\.(jpe?g|png|gif)$/i.test(file.name)){var reader=new FileReader;reader.addEventListener("load",(function(){var image=new Image;image.classList="rounded",image.width=45,image.title=file.name,image.src=this.result,preview.append(image)}),!1),reader.readAsDataURL(file)}}files&&[].forEach.call(files,readAndPreview)})),$(".img_principal").on("change",(function(){var form_img=$(this).parent().parent();form_img.find(".img-principal").empty();var preview=form_img.find(".img-principal"),files=form_img.find(".img_principal").prop("files");function readAndPreview(file){if(/\.(jpe?g|png|gif)$/i.test(file.name)){var reader=new FileReader;reader.addEventListener("load",(function(){var image=new Image;image.classList="rounded",image.height=180,image.title=file.name,image.src=this.result,preview.append(image)}),!1),reader.readAsDataURL(file)}}files&&[].forEach.call(files,readAndPreview)})),$(".img_multipla").on("change",(function(){var form_img=$(this).parent().parent();form_img.find(".img-multipla").empty();var preview=form_img.find(".img-multipla"),files=form_img.find(".img_multipla").prop("files");function readAndPreview(file){if(/\.(jpe?g|png|gif)$/i.test(file.name)){var reader=new FileReader;reader.addEventListener("load",(function(){var image=new Image;image.classList="rounded mx-1",image.height=80,image.title=file.name,image.src=this.result,preview.append(image)}),!1),reader.readAsDataURL(file)}}files&&[].forEach.call(files,readAndPreview)})),$(document).on("click",'[data-toggle="modal"]',(function(){$(".modal-content").find(".overlay").remove()})),$(document).on("click",'[data-target="#novoProduto"], [data-target="#editarProduto"]',(function(){$("#postProductNovaCategoria").find('input[name="parent_id"]').val(""),$("#novoProduto, #editarProduto").find('input[name="has_preparation"]').val("N"),$("#novoProduto, #editarProduto").find(".atributo-tab").addClass("d-none"),$("#novoProduto, #editarProduto").find(".overlay").remove(),$("#novoProduto, #editarProduto").find('input[type="text"]').val(""),$("#novoProduto, #editarProduto").find('input[type="checkbox"]').prop("checked",!1),$("#novoProduto, #editarProduto").find("select").val(""),$("#novoProduto, #editarProduto").find("select").trigger("change"),$("#novoProduto, #editarProduto").find(".img_principal").parent().find(".custom-file-label").html("Foto Principal"),$("#novoProduto, #editarProduto").find(".img-principal").empty(),$("#novoProduto, #editarProduto").find(".img_multipla").parent().find(".custom-file-label").html("Multiplas Foto"),$("#novoProduto, #editarProduto").find(".img-multipla").empty()})),$(document).on("click",".btn-salvar",(function(){let save_target=$(this).data("save_target"),save_route=$(this).data("save_route"),update_table=$(this).data("update_table"),table_trash=$(this).data("trash");funcaoEventoExtra($(save_target).serializeArray(),save_target),$(save_target).find("input").removeClass("is-invalid"),$(save_target).find(".invalid-feedback").remove();let modal=$(save_target).parent();modal.is(".modal-content")&&modal.append('<div class="overlay d-flex justify-content-center align-items-center"><i class="fas fa-2x fa-sync fa-spin"></i></div>'),$.ajax({url:save_route,type:"POST",data:new FormData($(save_target)[0]),cache:!1,contentType:!1,processData:!1,success:data=>{$(modal).find(".overlay").remove(),$(modal).parent().parent().modal("hide"),$(save_target).find('input[type="text"]').val(""),$(save_target).find("input, select").attr("readonly",!1),"S"==update_table&&data.table&&$("table tbody").append(data.table),"S"==update_table&&data.tb_up&&$("table tbody").find(".tr-id-"+data.tb_id).html(data.tb_up),"S"==table_trash?(data.tb_trash&&$("table tbody").find(".tr-id-"+data.tb_trash).remove(),Toast.fire({icon:"success",title:"Os dados foram excluidos com successo!"})):Toast.fire({icon:"success",title:"Os dados foram salvos com successo!"}),funcaoSuccessExtra(data,save_target)},error:err=>{$(modal).find(".overlay").remove();let erro_tags=err.responseJSON.errors;$.each(erro_tags,(key,value)=>{let tag=$(save_target).find('[name="'+key+'"]');tag.addClass("is-invalid"),tag.parent().append('<div class="invalid-feedback">'+value[0]+"</div>")}),err.responseJSON.msg_alert&&Swal.fire({icon:err.responseJSON.icon_alert,text:err.responseJSON.msg_alert})}})})),$(document).on("click",".btn-editar",(function(){var target=$(this).data("target"),dados=$(this).data("dados"),images=$(this).data("images");"permission"in dados&&(2==dados.permission?($(target).find('[name="afiliado_check"]').parent().addClass("d-none"),$(target).find(".form-afiliado").removeClass("d-none"),$(target).find(".form-afiliado").prepend('<div class="form-group afiliadoCheck_update col-12">\n                <input type="checkbox" id="afiliadoCheck_update" name="afiliado_check_update" value="true">\n                <label for="afiliadoCheck_update">Atualizar dados bancarios?</label>\n                </div>')):($(target).find('[name="afiliado_check"]').parent().removeClass("d-none"),$(target).find(".form-afiliado").addClass("d-none"),$(target).find(".form-afiliado").find(".afiliadoCheck_update").remove()));var data="";if($.each(dados,(key,value)=>{if($(target).find('[name="'+key+'"').val(value),$(target).find("."+key).val(value),$(target).find("._"+key).text(value),"description"==key&&$(target).find(".note-editable").html(value),"value"==key&&"#editarCupom"!==target&&"#editarPromocao"!==target&&value&&$(target).find('[name="'+key+'"').val(parseFloat(value).toFixed(2).toString().replace(".",",")),"price"==key&&"#editarCupom"!==target&&value&&$(target).find('[name="'+key+'"').val(parseFloat(value).toFixed(2).toString().replace(".",",")),"weight"==key&&"#editarCupom"!==target&&value&&$(target).find('[name="'+key+'"').val(parseFloat(value).toFixed(3).toString().replace(".",",")),"has_preparation"==key&&"S"==value&&$(target).find(".has_preparation").trigger("click"),"product_category"==key){for(var sub_category=[],i=0;value.length>i;i++)"S"==value[i].category_pai&&($(target).find('[name="main_category"]').val(value[i].category_id),$(target).find(".main_category").trigger("change")),"N"==value[i].category_pai&&sub_category.push(value[i].category_id);setTimeout(()=>{$(target).find(".sub_category").val(sub_category).trigger("change")},1e3,sub_category)}if("product_attribute"==key)for(var i=0;value.length>i;i++)null==value[i].attribute_id&&$(target).find("#edit_icheck_"+value[i].parent_id).trigger("click"),$(target).find("#edit_icheck_"+value[i].attribute_id).trigger("click"),$(target).find('[name="attribute['+value[i].attribute_id+'][attribute_value]"]').val("number"==typeof value[i].attribute_value?value[i].attribute_value.toFixed(2).toString().replace(".",","):"");if("#editarCupom"==target&&("discount_accepted"==key&&$(target).find(".discount_accepted").val(JSON.parse(value)),"user_id"==key&&$(target).find(".user_id").val(JSON.parse(value))),"start_date"==key){var date=value.split("-");$(target).find('[name="start_end_date"]').data("daterangepicker").setStartDate(date[2]+"/"+date[1]+"/"+date[0])}if("final_date"==key){var date=value.split("-");$(target).find('[name="start_end_date"]').data("daterangepicker").setEndDate(date[2]+"/"+date[1]+"/"+date[0])}"hexadecimal"==key&&(value&&$(target).find('[value="color"]').trigger("click"),value&&$(target).find('[name="color"]').trigger("change")),"image"==key&&value&&$(target).find('[value="image"]').trigger("click")}),images)for(var i=0;images.length>i;i++)0==i?$(target).find(".img-principal").append('<img class="rounded" style="height: 180px" src="'+images[i].image+'">'):$(target).find(".img-multipla").append('<img class="rounded mx-1" style="height: 80px" src="'+images[i].image+'">');$(target).find(".sales_unit").trigger("change"),$(target).find('[name="post_code"]').trigger("keyup"),$(target).find("select").trigger("change")})),$(document).on("change",".main_category",(function(){let modal_form=$(this).parent().parent().parent();if(modal_form.find(".sub_category").empty(),$(this).val()){var data=buscaCategoria({parent_id:$(this).val()});modal_form.find(".sub_category").parent().find("div").removeClass("d-none"),modal_form.find(".main_category").parent().find("div").addClass("d-none"),$("#postProductNovaCategoria").find('input[name="parent_id"]').val($(this).val()),$.each(data.responseJSON,(key,value)=>{modal_form.find(".sub_category").append('<option value="'+value.id+'">'+value.name+"</option>")})}else modal_form.find(".sub_category").parent().find("div").addClass("d-none"),modal_form.find(".main_category").parent().find("div").removeClass("d-none"),modal_form.find(".sub_category").append('<option value="" data-new_category="parent_id"> - Nova Sub Categoria - </option>'),$("#postProductNovaCategoria").find('input[name="parent_id"]').val("")})),$(document).on("change",".sub_category",(function(){let modal_form=$(this).parent().parent().parent()})),$(document).on("click",".btn-excluir-categoria",(function(){var target=$(this).data("target"),dados=$(this).data("dados");$(target).find(".modal-title").html('Excluir Categoria <strong>"'+dados.name+'"</strong>'),$(target).find('[name="id"]').val(dados.id),$.ajax({url:"/admin/cadastro/pesquisa_categoria_produto",type:"POST",data:{id:dados.id},success:data=>{$(target).find(".modal-body").empty(),"produto"==data.tipo?data.dados.length>0?($(target).find(".modal-footer").find("button").eq(1).addClass("d-none"),$(target).find(".modal-body").append("<p>Essa categoria não pode ser excluida porque possui <strong>"+data.dados.length+"</strong> Produtos vinculados!</p>"),$(target).find(".modal-body").append("<p>Inative os Produtos vinculados ou altere a Categoria vinculado ao Produto para excluir!</p>")):($(target).find(".modal-footer").find("button").eq(1).removeClass("d-none"),$(target).find(".modal-body").append("<p>Tem certeza que deseja excluir essa categoria?</p>")):"categoria"==data.tipo&&(data.dados.length>0?($(target).find(".modal-footer").find("button").eq(1).addClass("d-none"),$(target).find(".modal-body").append("<p>Essa categoria não pode ser excluida porque possui <strong>"+data.dados.length+"</strong> Sub Categorias vinculados!</p>"),$(target).find(".modal-body").append("<p>Exclua as Sub Categorias vinculadas para excluir a Principal!</p>")):($(target).find(".modal-footer").find("button").eq(1).removeClass("d-none"),$(target).find(".modal-body").append("<p>Tem certeza que deseja excluir essa categoria?</p>")))}})})),$(document).on("click",".btn-confirma-exclusao-categoria",(function(){let modal=$("#postExcluirCategoria").parent();modal.is(".modal-content")&&modal.append('<div class="overlay d-flex justify-content-center align-items-center"><i class="fas fa-2x fa-sync fa-spin"></i></div>'),$.ajax({url:"excluir_categoria",type:"POST",data:$("#postExcluirCategoria").serialize(),success:data=>{$(modal).find(".overlay").remove(),$(modal).parent().parent().modal("hide"),$(".tr-id-"+data.category_id).remove(),Toast.fire({icon:"success",title:"Os dados foram apagados com successo!"})},error:err=>{$(modal).find(".overlay").remove()}})})),$(document).on("click",".btn-excluir-produto",(function(){var target=$(this).data("target"),dados=$(this).data("dados");$(target).find(".product-name").text(dados.name),$(target).find('[name="product_id"]').val(dados.id)})),$(document).on("click",".btn-confirma-exclusao-produto",(function(){let modal=$("#postProductExcluirProduto").parent();modal.is(".modal-content")&&modal.append('<div class="overlay d-flex justify-content-center align-items-center"><i class="fas fa-2x fa-sync fa-spin"></i></div>'),$.ajax({url:"inativar_produto",type:"POST",data:$("#postProductExcluirProduto").serialize(),success:data=>{$(modal).find(".overlay").remove(),$(modal).parent().parent().modal("hide"),$(".tr-id-"+data.product_id).remove(),Toast.fire({icon:"success",title:"Os dados foram apagados com successo!"})},error:err=>{$(modal).find(".overlay").remove()}})})),$(document).on("click",".btn-excluir-promocao",(function(){var target=$(this).data("target"),dados=$(this).data("dados");$(target).find('[name="promotion_id"]').val(dados.id)})),$(document).on("click",".btn-confirma-exclusao-promocao",(function(){let modal=$("#postPromotionExcluirPromocao").parent();modal.is(".modal-content")&&modal.append('<div class="overlay d-flex justify-content-center align-items-center"><i class="fas fa-2x fa-sync fa-spin"></i></div>'),$.ajax({url:"apagar_promocao",type:"POST",data:$("#postPromotionExcluirPromocao").serialize(),success:data=>{$(modal).find(".overlay").remove(),$(modal).parent().parent().modal("hide"),$(".tr-id-"+data.promotion_id).remove(),Toast.fire({icon:"success",title:"Os dados foram apagados com successo!"})},error:err=>{$(modal).find(".overlay").remove()}})})),$(document).on("click",'[name="product_category"]',(function(){$("#product_check_form, #category_check_form, #main_category_check_form, #sub_category_check_form").addClass("d-none"),"product"==$(this).val()&&$("#product_check_form").removeClass("d-none"),"category"==$(this).val()&&$("#category_check_form").removeClass("d-none")})),$(document).on("click",'[name="categories"]',(function(){$("#main_category_check_form, #sub_category_check_form").addClass("d-none"),"main_category"==$(this).val()&&$("#main_category_check_form").removeClass("d-none"),"sub_category"==$(this).val()&&$("#sub_category_check_form").removeClass("d-none")})),$(document).on("click",'[name="attribute_check"]',(function(){var thisKey=$(this).parent().parent().parent().parent();thisKey.find(".imagem_check_form").addClass("d-none"),thisKey.find(".cor_check_form").addClass("d-none"),"image"==$(this).val()&&thisKey.find(".imagem_check_form").removeClass("d-none"),"color"==$(this).val()&&thisKey.find(".cor_check_form").removeClass("d-none")})),$(document).on("click",".has_preparation",(function(){$(this).prop("checked")?($(this).parent().parent().parent().find(".preparation_time").removeClass("d-none"),$(this).parent().find('input[name="has_preparation"]').val("S")):($(this).parent().parent().parent().find(".preparation_time").addClass("d-none"),$(this).parent().find('input[name="has_preparation"]').val("N"))})),$(document).on("click",".icheck_attribute",(function(){$(this).prop("checked")?$(this).parent().find(".icheck_attribute_input").val("S"):$(this).parent().find(".icheck_attribute_input").val("N")})),$(document).on("change",'[name="product_type"]',(function(){var this_form=$(this).closest("form");"simples"==$(this).val()?this_form.find(".atributo-tab").addClass("d-none"):"variacoes"==$(this).val()&&this_form.find(".atributo-tab").removeClass("d-none")})),$(document).on("click",".btn-visualizar",(function(){var target=$(this).data("target"),dados=$(this).data("dados");console.log(dados),$.each(dados,(key,value)=>{switch($(target).find("._"+key).text(value),"product_value"!=key&&"cost_freight"!=key&&"total_value"!=key||$(target).find("._"+key).text("R$ "+(parseFloat(value)||0).toFixed(2).toString().replace(".",",")),key){case"birth_date":var date=value.split("-");$(target).find("._"+key).text(date[2]+"/"+date[1]+"/"+date[0]);break;case"order_products":$(target).find(".produtos_pedido").empty();for(var i=0;i<value.length;i++){for(var attributes="",ii=0;ii<value[i].attributes.length;ii++){var attr;attributes+='<div class="col-12">'+(attr=value[i].attributes[ii].split("|"))[1]+" - "+parseFloat(attr[2]||0).toFixed(2).toString().replace(".",",")+"</div>"}for(var project="",ii=0;ii<value[i].project.length;ii++){var attr;project+='<div class="col-12">L: '+(attr=value[i].project[ii].split("|"))[0]+" - A: "+attr[1]+" - M²: "+attr[2]+"</div>"}$(target).find(".produtos_pedido").append('<div class="row border-bottom my-2"><div class="col-12 col-md-4"><b>Codigo do Produto: </b>'+value[i].product_code+'</div><div class="col-12 col-md-4"><b>Nome do Produto: </b>'+value[i].product_name+'</div><div class="col-12 col-md-4"><b>Quantidade: </b>'+value[i].quantity+'</div><div class="col-12 col-md-4"><b>Tipo de Venda: </b>'+value[i].product_sales_unit+'</div><div class="col-12 col-md-4"><b>Largura Padrão: </b>'+value[i].product_width+' cm</div><div class="col-12 col-md-4"><b>Altura Padrão: </b>'+value[i].product_height+' cm</div><div class="col-12 col-md-4"><b>Comprimento Padrão: </b>'+value[i].product_length+' cm</div><div class="col-12 col-md-4"><b>Peso Padrão: </b>'+value[i].product_weight+' kg</div><div class="col-12"><h5>Calculo do projeto</h5></div><div class="col-12 col-md-4"><b>Largura do Projeto: </b>'+value[i].project_width+'</div><div class="col-12 col-md-4"><b>Altura do Projeto: </b>'+value[i].project_height+'</div><div class="col-12 col-md-4"><b>M² do Projeto: </b>'+value[i].project_meters+'</div><div class="col-12 my-2"><h5>Atributos</h5></div><div class="col-12 col-md-4"><div class="row">'+attributes+'</div></div><div class="col-12 my-2"><h5>Projeto</h5></div><div class="col-12 col-md-4"><div class="row">'+project+"</div></div></div>")}break;case"shipping_customer":$(target).find(".entrega_pedido").empty(),$(target).find(".entrega_pedido").append('<div class="row border-bottom my-2"><div class="col-12 col-md-6">'+value[0].address+", Nª "+value[0].number+" - "+value[0].address2+'</div><div class="col-12 col-md-6">'+value[0].city+" / "+value[0].state+" - "+value[0].post_code+'</div><div class="col-12">'+value[0].phone1+" / "+value[0].phone2+'</div><div class="col-12 col-md-4"><b>Transportadora: </b>'+value[0].transport+" - <b>Data Estimada: </b> "+value[0].time+" dias</div></div>");break;case"payment_order":$(target).find(".pagamento_pedido").empty();for(var i=0;i<value.length;i++)"approved"==value[i].status&&$(target).find(".pagamento_pedido").append('<div class="row border-bottom my-2"><div class="col-12 col-md-4"><b>Total Pago: </b>'+(parseFloat(value[i].total_paid_amount)||0).toFixed(2).toString().replace(".",",")+'</div><div class="col-12 col-md-4"><b>Parcelamento: </b>'+value[i].installments+" x "+(parseFloat(value[i].installment_amount)||0).toFixed(2).toString().replace(".",",")+'</div><div class="col-12 col-md-4"><b>Recebido no Total: </b>'+(parseFloat(value[i].net_received_amount)||0).toFixed(2).toString().replace(".",",")+'</div><div class="col-12 col-md-4"><b>Taxa Paga a Operadora: </b>'+value[i].rate_mp+'</div><div class="col-12 col-md-4"><b>Metodo de Pagamento: </b>'+value[i].payment_method_id+'</div><div class="col-12 col-md-4"><b>Tipo de Pagamento: </b>'+value[i].payment_type_id+'</div><div class="col-12 col-md-4"><b>Nome do Pagador: </b>'+value[i].payer_name+'</div><div class="col-12 col-md-4"><b>CNPJ/CPF do Pagador: </b>'+value[i].payer_cnpj_cpf+"</div></div>")}})})),$(document).on("change",'[name="afiliado_check"]',(function(){$(this).prop("checked")?$(this).closest("form").find(".form-afiliado").removeClass("d-none"):$(this).closest("form").find(".form-afiliado").addClass("d-none")})),$(document).on("click",".btn-desativar",(function(){"1"==$(this).attr("data-status")?$(this).attr("data-status","0").removeClass("btn-success").addClass("btn-danger").html('<i class="fas fa-square"></i> Inativo'):$(this).attr("data-status","1").removeClass("btn-danger").addClass("btn-success").html('<i class="fas fa-check-square"></i> Ativo'),$.ajax({url:$(this).data("url"),type:"POST",data:{product_id:$(this).data("id"),product_status:$(this).attr("data-status")}})}))}));